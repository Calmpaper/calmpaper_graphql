# Migration `20200619200924-rating-author-rating-target`

This migration has been generated by ignatif at 6/19/2020, 8:09:24 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

ALTER TABLE "quaint"."Rating" ADD COLUMN "userUsername" TEXT   ;

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200619174811-ra..20200619200924-rating-author-rating-target
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url      = "file:./dev.db"
 }
 model User {
@@ -15,9 +15,10 @@
   avatar         String?
   books          Book[]
   chapters       Chapter[]
   voices         Voice[]
-  ratings        Rating[]
+  ratings        Rating[]   @relation("RatingAuthor")
+  settedRetings  Rating[]   @relation("RatingTarget")
 }
 model Book {
   id             Int        @default(autoincrement()) @id
@@ -62,10 +63,12 @@
 model Rating {
   id             Int        @default(autoincrement()) @id
   stars          Int
-  author         User?      @relation(fields: [authorUsername], references: [username])
+  author         User?      @relation(name: "RatingAuthor", fields: [authorUsername], references: [username])
   authorUsername String?
+  user           User?      @relation(name: "RatingTarget", fields: [userUsername], references: [username])
+  userUsername   String?
   book           Book?      @relation(fields: [bookId], references: [id])
   bookId         Int?
   chapter        Chapter?   @relation(fields: [chapterId], references: [id])
   chapterId      Int?
```


