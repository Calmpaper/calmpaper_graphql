# Migration `20200702113928-notification-remove-body`

This migration has been generated by ignatif at 7/2/2020, 11:39:28 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Notification" (
"authorUsername" TEXT   ,"bookId" INTEGER   ,"chapterId" INTEGER   ,"id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,"reviewId" INTEGER   ,FOREIGN KEY ("authorUsername") REFERENCES "User"("username") ON DELETE SET NULL ON UPDATE CASCADE,
FOREIGN KEY ("bookId") REFERENCES "Book"("id") ON DELETE SET NULL ON UPDATE CASCADE,
FOREIGN KEY ("chapterId") REFERENCES "Chapter"("id") ON DELETE SET NULL ON UPDATE CASCADE,
FOREIGN KEY ("reviewId") REFERENCES "Comment"("id") ON DELETE SET NULL ON UPDATE CASCADE)

INSERT INTO "quaint"."new_Notification" ("authorUsername", "bookId", "chapterId", "id", "reviewId") SELECT "authorUsername", "bookId", "chapterId", "id", "reviewId" FROM "quaint"."Notification"

PRAGMA foreign_keys=off;
DROP TABLE "quaint"."Notification";;
PRAGMA foreign_keys=on

ALTER TABLE "quaint"."new_Notification" RENAME TO "Notification";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200702112656-books1..20200702113928-notification-remove-body
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource sqlite {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 model User {
@@ -26,31 +26,31 @@
   id             Int        @default(autoincrement()) @id
   name           String
   description    String
   image          String?
-  views          Int        @default(0)
   author         User?      @relation(fields: [authorUsername], references: [username])
   authorUsername String?
   chapters       Chapter[]
   tags           Tag[]      @relation(references: [id])
+  likes          Like[]
+  views          Int        @default(0)
   reviews        Review[]
-  likes          Like[]
   comments       Comment[]
 }
 model Chapter {
   id             Int        @default(autoincrement()) @id
   title          String?
   content        String
   image          String?
-  views          Int        @default(0)
   author         User?      @relation(fields: [authorUsername], references: [username])
   authorUsername String?
   book           Book?      @relation(fields: [bookId], references: [id])
   bookId         Int?
   tags           Tag[]      @relation(references: [id])
+  likes          Like[]
+  views          Int        @default(0)
   reviews        Review[]
-  likes          Like[]
   comments       Comment[]
 }
 model Tag {
@@ -101,9 +101,8 @@
 model Notification {
   id             Int        @default(autoincrement()) @id
-  body           String
   author         User?      @relation(fields: [authorUsername], references: [username])
   authorUsername String?
   book           Book?      @relation(fields: [bookId], references: [id])
   bookId         Int?
```


