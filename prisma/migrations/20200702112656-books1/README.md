# Migration `20200702112656-books1`

This migration has been generated by ignatif at 7/2/2020, 11:26:56 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."_UserFollowers" (
"A" INTEGER NOT NULL  ,"B" INTEGER NOT NULL  ,FOREIGN KEY ("A") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("B") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE)

CREATE UNIQUE INDEX "quaint"."_UserFollowers_AB_unique" ON "_UserFollowers"("A","B")

CREATE  INDEX "quaint"."_UserFollowers_B_index" ON "_UserFollowers"("B")

PRAGMA foreign_keys=off;
DROP TABLE "quaint"."_UserFollows";;
PRAGMA foreign_keys=on

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200702112422-books..20200702112656-books1
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource sqlite {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 model User {
@@ -17,19 +17,18 @@
   chapters       Chapter[]
   reviews        Review[]
   likes          Like[]
   comments       Comment[]
-  following      User[]     @relation("UserFollows", references: [id])
-  followedBy     User[]     @relation("UserFollows", references: [id])
+  following      User[]     @relation("UserFollowers", references: [id])
+  followers      User[]     @relation("UserFollowers", references: [id])
 }
 model Book {
   id             Int        @default(autoincrement()) @id
   name           String
   description    String
   image          String?
   views          Int        @default(0)
-
   author         User?      @relation(fields: [authorUsername], references: [username])
   authorUsername String?
   chapters       Chapter[]
   tags           Tag[]      @relation(references: [id])
@@ -43,9 +42,8 @@
   title          String?
   content        String
   image          String?
   views          Int        @default(0)
-
   author         User?      @relation(fields: [authorUsername], references: [username])
   authorUsername String?
   book           Book?      @relation(fields: [bookId], references: [id])
   bookId         Int?
@@ -57,17 +55,15 @@
 model Tag {
   id             Int        @default(autoincrement()) @id
   label          String
-
   books          Book[]     @relation(references: [id])
   chapters       Chapter[]  @relation(references: [id])
 }
 model Comment {
   id             Int        @default(autoincrement()) @id
   body           String
-
   author         User?      @relation(fields: [authorUsername], references: [username])
   authorUsername String?
   book           Book?      @relation(fields: [bookId], references: [id])
   bookId         Int?
@@ -79,9 +75,8 @@
 model Review {
   id             Int        @default(autoincrement()) @id
   stars          Int
   message        String?
-
   author         User?      @relation(fields: [authorUsername], references: [username])
   authorUsername String?
   book           Book?      @relation(fields: [bookId], references: [id])
   bookId         Int?
@@ -107,9 +102,8 @@
 model Notification {
   id             Int        @default(autoincrement()) @id
   body           String
-
   author         User?      @relation(fields: [authorUsername], references: [username])
   authorUsername String?
   book           Book?      @relation(fields: [bookId], references: [id])
   bookId         Int?
```


